<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interactive Task Manager</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#6366f1;--muted:#94a3b8;--success:#10b981}
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin:0;background:linear-gradient(180deg,#071025 0%, #071026 100%);color:#e6eef8;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .app{width:100%;max-width:820px}
    header{display:flex;align-items:center;gap:12px;margin-bottom:18px}
    h1{font-size:20px;margin:0}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));border-radius:12px;padding:18px;box-shadow:0 6px 20px rgba(2,6,23,0.6);}
    .controls{display:flex;gap:8px;margin-bottom:12px}
    input[type="text"]{flex:1;padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;font-size:14px}
    button{padding:10px 14px;border-radius:8px;border:0;background:var(--accent);color:white;cursor:pointer;font-weight:600}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:500}
    ul.tasks{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:10px}
    li.task{display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02)}
    .task .title{flex:1}
    .task .title input{width:100%;background:transparent;border:0;color:inherit;font-size:15px}
    .meta{display:flex;gap:8px;align-items:center}
    .btn-icon{background:transparent;border:0;color:var(--muted);cursor:pointer;padding:6px;border-radius:8px}
    .btn-icon:hover{color:white;background:rgba(255,255,255,0.02)}
    .completed .title input{text-decoration:line-through;opacity:0.6}
    .small{font-size:12px;color:var(--muted)}
    .footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
    .filters{display:flex;gap:8px}
    .chip{padding:6px 8px;border-radius:999px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
    .chip.active{background:rgba(99,102,241,0.16);border-color:rgba(99,102,241,0.3)}
    @media (max-width:600px){.controls{flex-direction:column}button{width:100%}}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div style="width:48px;height:48px;border-radius:8px;background:linear-gradient(135deg,var(--accent),#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:700">TM</div>
      <div>
        <h1>Interactive Task Manager</h1>
        <div class="small">Add, delete, edit, and mark tasks complete. Data saved in your browser.</div>
      </div>
    </header>

    <div class="card">
      <div class="controls">
        <input id="newTaskInput" type="text" placeholder="Add a new task and press Enter or click Add" />
        <button id="addBtn">Add</button>
        <button id="clearCompleted" class="secondary">Clear Completed</button>
      </div>

      <ul id="tasksList" class="tasks" aria-live="polite"></ul>

      <div class="footer">
        <div id="counts" class="small">0 tasks</div>
        <div class="filters">
          <div class="chip active" data-filter="all">All</div>
          <div class="chip" data-filter="active">Active</div>
          <div class="chip" data-filter="completed">Completed</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Simple Task Manager using localStorage
    const STORAGE_KEY = 'interactive_tasks_v1';
    const input = document.getElementById('newTaskInput');
    const addBtn = document.getElementById('addBtn');
    const tasksList = document.getElementById('tasksList');
    const counts = document.getElementById('counts');
    const clearCompletedBtn = document.getElementById('clearCompleted');
    const chips = document.querySelectorAll('.chip');

    let tasks = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
    let filter = 'all';

    function save() { localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks)); }

    function uid() { return Date.now().toString(36) + Math.random().toString(36).slice(2,7); }

    function render() {
      tasksList.innerHTML = '';
      const visible = tasks.filter(t => {
        if (filter === 'all') return true;
        if (filter === 'active') return !t.completed;
        if (filter === 'completed') return t.completed;
      });

      visible.forEach(task => {
        const li = document.createElement('li');
        li.className = 'task' + (task.completed ? ' completed' : '');
        li.dataset.id = task.id;

        // checkbox
        const chk = document.createElement('input');
        chk.type = 'checkbox';
        chk.checked = !!task.completed;
        chk.title = 'Mark complete';
        chk.addEventListener('change', () => toggleComplete(task.id));

        // title (editable)
        const titleWrap = document.createElement('div');
        titleWrap.className = 'title';
        const titleInput = document.createElement('input');
        titleInput.value = task.title;
        titleInput.addEventListener('blur', () => updateTitle(task.id, titleInput.value.trim()));
        titleInput.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') titleInput.blur();
          if (e.key === 'Escape') { titleInput.value = task.title; titleInput.blur(); }
        });
        titleWrap.appendChild(titleInput);

        // meta buttons
        const meta = document.createElement('div');
        meta.className = 'meta';

        const editBtn = document.createElement('button');
        editBtn.className = 'btn-icon';
        editBtn.title = 'Focus to edit';
        editBtn.innerHTML = 'âœï¸';
        editBtn.addEventListener('click', () => { titleInput.focus(); titleInput.select(); });

        const delBtn = document.createElement('button');
        delBtn.className = 'btn-icon';
        delBtn.title = 'Delete task';
        delBtn.innerHTML = 'ðŸ—‘ï¸';
        delBtn.addEventListener('click', () => deleteTask(task.id));

        meta.appendChild(editBtn);
        meta.appendChild(delBtn);

        li.appendChild(chk);
        li.appendChild(titleWrap);
        li.appendChild(meta);

        tasksList.appendChild(li);
      });

      counts.textContent = `${tasks.length} task${tasks.length === 1 ? '' : 's'}`;
      // update chip UI
      chips.forEach(c => c.classList.toggle('active', c.dataset.filter === filter));
    }

    function addTask(title) {
      const t = title.trim();
      if (!t) return;
      const task = { id: uid(), title: t, completed: false, created: Date.now() };
      tasks.unshift(task); // newest first
      save(); render();
      input.value = '';
      input.focus();
    }

    function deleteTask(id) {
      tasks = tasks.filter(t => t.id !== id);
      save(); render();
    }

    function toggleComplete(id) {
      tasks = tasks.map(t => t.id === id ? { ...t, completed: !t.completed } : t);
      save(); render();
    }

    function updateTitle(id, newTitle) {
      if (!newTitle) { // do not allow empty title -> delete
        deleteTask(id);
        return;
      }
      tasks = tasks.map(t => t.id === id ? { ...t, title: newTitle } : t);
      save(); render();
    }

    function clearCompleted() {
      tasks = tasks.filter(t => !t.completed);
      save(); render();
    }

    // Events
    addBtn.addEventListener('click', () => addTask(input.value));
    input.addEventListener('keydown', (e) => { if (e.key === 'Enter') addTask(input.value); });
    clearCompletedBtn.addEventListener('click', clearCompleted);

    chips.forEach(ch => ch.addEventListener('click', () => { filter = ch.dataset.filter; render(); }));

    // Initial render
    render();

    // Optional: expose for debugging
    window._taskApp = { get tasks(){return tasks}, save, render };
  </script>
</body>
</html>
